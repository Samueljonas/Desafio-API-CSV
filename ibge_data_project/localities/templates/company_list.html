{% extends 'base.html' %}{% block content %}
<h1 class="mb-4">Listagem de Empresas</h1>

<form method="get" class="mb-4">
  <div class="row g-3 align-items-center">
    <div class="col-auto">
      <label for="cnpj" class="col-form-label">Filtrar por CNPJ Básico:</label>
    </div>
    <div class="col-auto">
      <input
        type="text"
        name="cnpj"
        id="cnpj"
        class="form-control"
        value="{{ cnpj_search|default:'' }}"
      />
    </div>
    <div class="col-auto">
      <button type="submit" class="btn btn-primary">Buscar</button>
    </div>
  </div>
</form>

<table class="table table-striped table-hover">
  <thead class="table-dark">
    <tr>
      <th>CNPJ Básico</th>
      <th>Razão Social</th>
      <th>Natureza Jurídica</th>
      <th>Porte da Empresa</th>
    </tr>
  </thead>
  <tbody>
    {% for company in page_obj %}
    <tr>
      <td>{{ company.cnpj_basico }}</td>
      <td>{{ company.razao_social }}</td>
      <td>{{ company.natureza_juridica }}</td>
      <td>{{ company.porte_empresa }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<nav aria-label="Paginação de Empresas">
  <ul class="pagination justify-content-center">
    {% if page_obj.has_previous %}
    <li class="page-item">
      <a class="page-link" href="?page=1&cnpj={{ cnpj_search }}"
        >&laquo; primeira</a
      >
    </li>
    <li class="page-item">
      <a
        class="page-link"
        href="?page={{ page_obj.previous_page_number }}&cnpj={{ cnpj_search }}"
        >anterior</a
      >
    </li>
    {% endif %}

    <li class="page-item disabled">
      <span class="page-link"
        >Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages
        }}.</span
      >
    </li>

    {% if page_obj.has_next %}
    <li class="page-item">
      <a
        class="page-link"
        href="?page={{ page_obj.next_page_number }}&cnpj={{ cnpj_search }}"
        >próxima</a
      >
    </li>
    <li class="page-item">
      <a
        class="page-link"
        href="?page={{ page_obj.paginator.num_pages }}&cnpj={{ cnpj_search }}"
        >última &raquo;</a
      >
    </li>
    {% endif %}
  </ul>
</nav>

<a href="{% url 'home' %}" class="btn btn-secondary mt-3">Voltar para a home</a>
{% endblock %}
